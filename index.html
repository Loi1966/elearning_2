<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¥ Ph·ªèng L·∫≠p Tr√¨nh B·∫•t ƒê·ªìng B·ªô</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° M√¥ Ph·ªèng L·∫≠p Tr√¨nh B·∫•t ƒê·ªìng B·ªô</h1>
            <p class="subtitle">Kh√°m ph√° c√°c k·ªπ thu·∫≠t b·∫•t ƒë·ªìng b·ªô ƒë·ªÉ t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t ·ª©ng d·ª•ng</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('callbacks')">Callbacks</button>
            <button class="tab-btn" onclick="switchTab('promises')">Promises</button>
            <button class="tab-btn" onclick="switchTab('async-await')">Async/Await</button>
            <button class="tab-btn" onclick="switchTab('parallel')">Promise.all()</button>
            <button class="tab-btn" onclick="switchTab('race')">Promise.race()</button>
            <button class="tab-btn" onclick="switchTab('queue')">Task Queue</button>
        </div>

        <!-- Callbacks Demo -->
        <div id="callbacks" class="tab-content active">
            <div class="demo-card">
                <h2>üìû Callbacks - C√°ch C≈©</h2>
                <p>Callbacks l√† h√†m ƒë∆∞·ª£c truy·ªÅn v√†o h√†m kh√°c ƒë·ªÉ th·ª±c thi sau khi t√°c v·ª• ho√†n th√†nh. Ph∆∞∆°ng ph√°p n√†y d·ªÖ d·∫´n ƒë·∫øn "Callback Hell".</p>
                
                <div class="code-block">
function fetchData(callback) {
  setTimeout(() => {
    callback("D·ªØ li·ªáu nh·∫≠n ƒë∆∞·ª£c!");
  }, 1000);
}

fetchData((data) => {
  console.log(data);
});
                </div>

                <div class="controls">
                    <button onclick="runCallbackDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('callbackOutput')">X√≥a</button>
                </div>

                <div class="output" id="callbackOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="callbackTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">T√°c v·ª•</div>
                        <div class="metric-value" id="callbackTasks">0</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>‚ö†Ô∏è Nh∆∞·ª£c ƒëi·ªÉm:</strong> Callback Hell, kh√≥ ƒë·ªçc, kh√≥ b·∫£o tr√¨, x·ª≠ l√Ω l·ªói ph·ª©c t·∫°p
                </div>
            </div>
        </div>

        <!-- Promises Demo -->
        <div id="promises" class="tab-content">
            <div class="demo-card">
                <h2>ü§ù Promises - C·∫£i Ti·∫øn</h2>
                <p>Promises cung c·∫•p c√°ch t·ªët h∆°n ƒë·ªÉ x·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô v·ªõi .then(), .catch(), v√† .finally().</p>
                
                <div class="code-block">
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("Th√†nh c√¥ng!");
  }, 1000);
});

promise
  .then(data => console.log(data))
  .catch(error => console.error(error));
                </div>

                <div class="controls">
                    <button onclick="runPromiseDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('promiseOutput')">X√≥a</button>
                </div>

                <div class="output" id="promiseOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="promiseTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">T√°c v·ª•</div>
                        <div class="metric-value" id="promiseTasks">0</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>‚úÖ ∆Øu ƒëi·ªÉm:</strong> D·ªÖ chain, x·ª≠ l√Ω l·ªói t·ªët h∆°n, code s·∫°ch h∆°n
                </div>
            </div>
        </div>

        <!-- Async/Await Demo -->
        <div id="async-await" class="tab-content">
            <div class="demo-card">
                <h2>üöÄ Async/Await - Hi·ªán ƒê·∫°i Nh·∫•t</h2>
                <p>Async/Await cho ph√©p vi·∫øt code b·∫•t ƒë·ªìng b·ªô gi·ªëng nh∆∞ code ƒë·ªìng b·ªô, d·ªÖ ƒë·ªçc v√† d·ªÖ hi·ªÉu h∆°n.</p>
                
                <div class="code-block">
async function fetchData() {
  try {
    const data = await new Promise(resolve => {
      setTimeout(() => resolve("D·ªØ li·ªáu!"), 1000);
    });
    console.log(data);
  } catch (error) {
    console.error(error);
  }
}

await fetchData();
                </div>

                <div class="controls">
                    <button onclick="runAsyncAwaitDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('asyncAwaitOutput')">X√≥a</button>
                </div>

                <div class="output" id="asyncAwaitOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="asyncAwaitTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">T√°c v·ª•</div>
                        <div class="metric-value" id="asyncAwaitTasks">0</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>‚úÖ ∆Øu ƒëi·ªÉm:</strong> Code s·∫°ch, d·ªÖ ƒë·ªçc, x·ª≠ l√Ω l·ªói v·ªõi try/catch, khuy·∫øn ngh·ªã d√πng
                </div>
            </div>
        </div>

        <!-- Parallel Demo -->
        <div id="parallel" class="tab-content">
            <div class="demo-card">
                <h2>‚ö° Promise.all() - Th·ª±c Thi Song Song</h2>
                <p>Promise.all() ch·∫°y nhi·ªÅu t√°c v·ª• c√πng l√∫c, nhanh h∆°n ch·∫°y tu·∫ßn t·ª±. N·∫øu 1 t√°c v·ª• l·ªói, t·∫•t c·∫£ l·ªói.</p>
                
                <div class="code-block">
const promises = [
  new Promise(r => setTimeout(() => r("Task 1"), 1000)),
  new Promise(r => setTimeout(() => r("Task 2"), 1500)),
  new Promise(r => setTimeout(() => r("Task 3"), 800))
];

const results = await Promise.all(promises);
console.log(results);
                </div>

                <div class="controls">
                    <button onclick="runParallelDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('parallelOutput')">X√≥a</button>
                </div>

                <div class="task-list" id="parallelTasks"></div>

                <div class="output" id="parallelOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="parallelTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">T√°c v·ª•</div>
                        <div class="metric-value" id="parallelTasks">0</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">TƒÉng T·ªëc</div>
                        <div class="metric-value" id="parallelSpeedup">0%</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üí° L·ª£i √≠ch:</strong> Nhanh h∆°n 2-3x so v·ªõi ch·∫°y tu·∫ßn t·ª±, t·∫≠n d·ª•ng t·ªëi ƒëa t√†i nguy√™n
                </div>
            </div>
        </div>

        <!-- Race Demo -->
        <div id="race" class="tab-content">
            <div class="demo-card">
                <h2>üèÅ Promise.race() - Ch·∫°y ƒêua</h2>
                <p>Promise.race() tr·∫£ v·ªÅ k·∫øt qu·∫£ c·ªßa t√°c v·ª• ho√†n th√†nh ƒë·∫ßu ti√™n. H·ªØu √≠ch cho timeout v√† fallback.</p>
                
                <div class="code-block">
const promises = [
  new Promise(r => setTimeout(() => r("Nhanh"), 500)),
  new Promise(r => setTimeout(() => r("Ch·∫≠m"), 2000))
];

const result = await Promise.race(promises);
console.log(result); // "Nhanh"
                </div>

                <div class="controls">
                    <button onclick="runRaceDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('raceOutput')">X√≥a</button>
                </div>

                <div class="task-list" id="raceTasks"></div>

                <div class="output" id="raceOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="raceTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Ng∆∞·ªùi Th·∫Øng</div>
                        <div class="metric-value" id="raceWinner">-</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üí° ·ª®ng d·ª•ng:</strong> Timeout, fallback, l·∫•y k·∫øt qu·∫£ nhanh nh·∫•t t·ª´ nhi·ªÅu ngu·ªìn
                </div>
            </div>
        </div>

        <!-- Queue Demo -->
        <div id="queue" class="tab-content">
            <div class="demo-card">
                <h2>üìã Task Queue - Qu·∫£n L√Ω H√†ng ƒê·ª£i</h2>
                <p>Task Queue ki·ªÉm so√°t s·ªë l∆∞·ª£ng t√°c v·ª• ch·∫°y c√πng l√∫c, h·ªØu √≠ch khi c√≥ gi·ªõi h·∫°n t√†i nguy√™n.</p>
                
                <div class="code-block">
class TaskQueue {
  constructor(concurrency = 2) {
    this.concurrency = concurrency;
    this.running = 0;
    this.queue = [];
  }

  async add(task) {
    while (this.running >= this.concurrency) {
      await new Promise(r => setTimeout(r, 100));
    }
    this.running++;
    await task();
    this.running--;
  }
}
                </div>

                <div class="controls">
                    <label>
                        ƒê·ªô ƒê·ªìng Th·ªùi:
                        <input type="number" id="concurrency" min="1" max="5" value="2" style="width: 50px; padding: 5px; margin: 0 10px;">
                    </label>
                    <button onclick="runQueueDemo()">Ch·∫°y Demo</button>
                    <button onclick="clearOutput('queueOutput')">X√≥a</button>
                </div>

                <div class="task-list" id="queueTasks"></div>

                <div class="output" id="queueOutput"></div>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Th·ªùi gian</div>
                        <div class="metric-value" id="queueTime">0ms</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">T√°c v·ª•</div>
                        <div class="metric-value" id="queueTasks">0</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ƒêang Ch·∫°y</div>
                        <div class="metric-value" id="queueRunning">0</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üí° ·ª®ng d·ª•ng:</strong> Gi·ªõi h·∫°n k·∫øt n·ªëi API, t·∫£i file, x·ª≠ l√Ω d·ªØ li·ªáu l·ªõn
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
